10 REM******************************AFTOX***************************************
20 ' THIS MODEL IS A GAUSSIAN PUFF DISPERSION MODEL DESIGNED FOR CONTINUOUS
30 ' OR INSTANTANEOUS, GAS OR LIQUID, ELEVATED OR GROUND LEVEL RELEASES.
40 DIM TW(4),CONCI(3),CONCP(3),B(40)
50 DIM NR(9,7),NN(6,4)
60 COMMON CONCON,IUNIT,QSS,QPIPE,TTSP,TW(),WWIDTH,U,HINV,STB,WAT,WD,OPTN,ZO,UU
70 COMMON HTCONV,ISTAT,IUNCO,STBV,TAK,H,SIGTH,MFLAG,ZOO,PRES,TNU,TA,MW,CLOUD
80 COMMON SR,A,VISCK,CMTC,TMSP,TB,NU,RENL,EOK,DVAP,DLIQ,SIG,HF,PYN,NO
90 COMMON AMW,HS,TS,VF,AT,IUCON,Z,CONCI(),CONCP(),NNNN,T,CMIN,SVE,TC,VP,AA3
100 COMMON SN$,DTE$,ZT$,LA,LO,ZW,DFT,HET,CHM$,DW,PI,EGA,SCR
110 COMMON COL1,COL4,COL5
120 COL1=14 
130 COL4=15
140 COL5=12
150 PI=3.14159265#
160 MFLAG=0
170 MW=0
180 TTSP=0
190 IUNCO=0
200 OPEN "I",#1,"DEVICE.DAT"
210 INPUT#1,EGA,SCR
220 CLOSE #1
230 IF EGA=1 THEN SCREEN 9
240 IF SCR=1 THEN COLOR 15,1 ELSE COLOR 15,0
250 CLS
260 COLOR COL1
270 LOCATE 10,20: PRINT "  USAF TOXIC CHEMICAL DISPERSION MODEL"
280 LOCATE 12,36: PRINT " AFTOX"
290 LOCATE 14,34: PRINT "Version 4.1"
300 LOCATE 20,17: PRINT "Portions (C) Copyrighted Microsoft Corp (1986)"
310 LOCATE 21,30: PRINT "All rights reserved"
320 IF PYN>0 THEN 940
330 COLOR COL4
340 LOCATE 25,24: INPUT "---Press <ENTER> to Continue---",XX
350 CLS
360 LOCATE 4,1
370 COLOR COL1
380 PRINT "  ****************************************************************************"
390 PRINT "  IF YOU WISH TO BACK UP DURING EXECUTION OF PROGRAM TO CHANGE INPUT DATA--       ENTER <999 ENTER>"
400 PRINT:PRINT "  TO ACCEPT DEFAULT VALUES <IN BRACKETS>, PRESS <ENTER>"
410 PRINT:PRINT "  IF PRINTER IS OFF, DATA WILL BE STORED IN FILE <AFT.DAT> FOR LATER RETRIEVAL"
420 PRINT:PRINT "  TO CHANGE DATA IN STATION DATA FILE, RUN <SDFIL.EXE>"
430 PRINT:PRINT "  TO CHANGE DATA IN CHEMICAL DATA FILE, RUN <CHFIL.EXE>"
431 PRINT "                 -------------------------"
432 PRINT "  FOR MODEL DESCRIPTION, REFER TO:"
433 PRINT "      KUNKEL B.A. (1991)  AFTOX 4.0 - THE AIR FORCE TOXIC CHEMICAL"
434 PRINT "      DISPERSION MODEL - A USER'S GUIDE, PL-TR-91-2119, ADA246726."
435 PRINT:PRINT "  FOR MODEL EVALUATION, REFER TO:
436 PRINT "      KUNKEL, B.A. (1988)  USER'S GUIDE FOR THE AIR FORCE TOXIC CHEMICAL"
437 PRINT "      DISPERSION MODEL (AFTOX), AFGL-TR-88-0009, ADA199096.
440 PRINT "  ****************************************************************************"
450 COLOR COL4
460 LOCATE 25,24: INPUT "---Press <ENTER> to Continue---",XX
470 CLS
480 IF PYN=2 THEN 940
490 LOCATE 25,1: INPUT "IS PRINTER ON(Y/N)? <N>",YN$
500 IF YN$="Y" OR YN$="y" THEN 580
510 PYN=2
520 COLOR COL1
530 CLS
540 LOCATE 12,20: PRINT "  OUTPUT WILL BE SENT TO FILE <AFT.DAT>"
550 FOR I=1 TO 5000
560 NEXT I
570 GOTO 940
580 PYN=1
590 CLS
600 IF EGA=2 THEN 940
610 LOCATE 7,1
620 COLOR COL1
630 PRINT "  ****************************************************************************"
640 LOCATE 8,10: PRINT "IF YOU WANT A SCREEN DUMP OF THE CONTOUR PLOT, YOU MUST "
650 LOCATE 9,10: PRINT "  LOAD THE PRINTER DRIVER FOR YOUR PARTICULAR PRINTER"
660 LOCATE 10,24: PRINT "BEFORE RUNNING AFTOX."
670 PRINT "  ****************************************************************************"
680 COLOR COL4
690 LOCATE 13,1
700 PRINT "  ENTER"
710 PRINT "         <1>";: COLOR COL1: PRINT " TO CONTINUE"
720 COLOR COL4
730 PRINT "         <2>";: COLOR COL1: PRINT " TO ENTER PRINTER DRIVER"
740 COLOR COL4
750 INPUT DD
760 IF DD =1 THEN 940
770 IF DD =2 THEN 800
780 PRINT CHR$(7)
790 GOTO 690
800 CLS
810 COLOR COL1
820 LOCATE 3,1
830 PRINT "  LOAD ONE, AND THEN RELOAD AFTOX:"
835 PRINT 
840 PRINT "       PSCMPI   --- MPI PRINTER"
850 PRINT "       PSCOKI   --- OKIDATA PRINTER"
860 PRINT "       PSCMX80  --- EPSOM PRINTER"
870 PRINT "       PSCMX80  --- ALPS2000 PRINTER"
875 PRINT "       GRAPHICS --- ALL OTHERS"
880 PRINT
890 PRINT "  YOU MAY WANT TO LOAD YOUR OWN PRINTER DRIVER"
900 COLOR COL4
910 LOCATE 25,27
920 INPUT "Press <ENTER> to Continue",XX
930 END
940 IF PYN=1 THEN 1010
950 IF AA3 >0 THEN 970
960 OPEN "O",#3, "AFT.DAT"
970 PRINT #3, "": PRINT #3, "        USAF TOXIC CHEMICAL DISPERSION MODEL"
980 PRINT #3, "": PRINT #3, "                       AFTOX"
990 PRINT #3, "": PRINT #3, ""
1000 GOTO 1040
1010 LPRINT: LPRINT "            USAF TOXIC CHEMICAL DISPERSION MODEL"
1020 LPRINT: LPRINT "                           AFTOX"
1030 LPRINT: LPRINT
1040 AA3=1
1050 CHAIN"DSP1"
1060 END
